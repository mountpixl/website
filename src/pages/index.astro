---
import BaseLayout from '../layouts/BaseLayout.astro';
import ServiceCard from '../components/ServiceCard.astro';
import BlogCard from '../components/BlogCard.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('blog'))
  .sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime())
  .slice(0, 3);

const schema = {
  '@context': 'https://schema.org',
  '@type': ['LocalBusiness', 'ProfessionalService'],
  name: 'Mount Pixl',
  description: 'AI consulting and workflow automation for small-to-medium businesses in Alberta, Canada.',
  url: 'https://mountpixl.com',
  telephone: '',
  email: 'hello@mountpixl.com',
  address: {
    '@type': 'PostalAddress',
    addressLocality: 'Sherwood Park',
    addressRegion: 'AB',
    addressCountry: 'CA',
  },
  areaServed: [
    { '@type': 'Province', name: 'Alberta' },
    { '@type': 'Country', name: 'Canada' },
  ],
  priceRange: '$$',
  knowsAbout: ['Artificial Intelligence', 'Workflow Automation', 'AI Agents', 'Business Process Automation'],
};

const services = [
  {
    title: 'AI Strategy & Consulting',
    icon: '&#x1F9ED;',
    description: 'We audit your workflows, identify the highest-impact AI opportunities, and build a clear roadmap to get there.',
    outcomes: ['Workflow audit & AI readiness report', 'Prioritized automation roadmap', '90-day implementation plan'],
  },
  {
    title: 'AI Agent Development',
    icon: '&#x1F916;',
    description: 'Custom AI agents that handle real work — customer support, data processing, content creation, and more.',
    outcomes: ['Custom Claude/GPT agents', 'Tool integrations & MCP servers', 'Production deployment & monitoring'],
  },
  {
    title: 'Workflow Automation',
    icon: '&#x26A1;',
    description: 'Connect your tools and eliminate manual steps with intelligent automation flows that run 24/7.',
    outcomes: ['n8n, Make & Zapier flows', 'System integrations & APIs', 'Data pipelines & reporting'],
  },
  {
    title: 'Training & Workshops',
    icon: '&#x1F393;',
    description: 'Get your team confident with AI tools through hands-on training tailored to your business.',
    outcomes: ['Custom team workshops', 'Prompt engineering training', 'AI adoption coaching'],
  },
];

const steps = [
  { number: 1, title: 'Assess', description: 'We analyze your current workflows and identify where AI delivers the biggest impact.', icon: 'M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z' },
  { number: 2, title: 'Design', description: 'We architect the right solution — the right tools, the right approach, no unnecessary complexity.', icon: 'M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.994 15.994 0 011.622-3.395m3.42 3.42a15.995 15.995 0 004.764-4.648l3.876-5.814a1.151 1.151 0 00-1.597-1.597L14.146 6.32a15.996 15.996 0 00-4.649 4.763m3.42 3.42a6.776 6.776 0 00-3.42-3.42' },
  { number: 3, title: 'Build', description: 'We build, test, and deploy your AI solutions with your team in the loop at every step.', icon: 'M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 11-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 004.486-6.336l-3.276 3.277a3.004 3.004 0 01-2.25-2.25l3.276-3.276a4.5 4.5 0 00-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085' },
  { number: 4, title: 'Support', description: 'We monitor, optimize, and evolve your solutions as your business grows.', icon: 'M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182' },
];

const stats = [
  { value: '15+', label: 'Hours saved per week', suffix: 'on average' },
  { value: '300%', label: 'Average ROI', suffix: 'within 6 months' },
  { value: '60', label: 'Day guarantee', suffix: 'measurable results' },
  { value: '24/7', label: 'Automation uptime', suffix: 'always running' },
];

const marqueeItems = [
  'Anthropic', 'OpenAI', 'Claude', 'n8n', 'Make', 'Zapier',
  'Slack', 'Google Workspace', 'Microsoft 365', 'HubSpot',
];
---

<BaseLayout
  title="Mount Pixl"
  description="AI consulting and workflow automation for small-to-medium businesses. We help Canadian SMBs save time, cut costs, and grow with practical AI solutions."
  schema={schema}
>
  <!-- ============================================
       HERO — gradient animate + text split reveal
       ============================================ -->
  <section class="relative overflow-hidden bg-gradient-to-br from-deep-green via-[#0a1f0e] to-forest gradient-animate min-h-[90vh] flex items-center">
    <!-- Animated gradient blobs -->
    <div class="absolute inset-0 overflow-hidden">
      <div class="absolute top-1/4 -left-20 w-[500px] h-[500px] bg-gold/15 rounded-full blur-[120px] animate-pulse" style="animation-duration: 4s"></div>
      <div class="absolute bottom-1/4 right-0 w-[600px] h-[600px] bg-teal/10 rounded-full blur-[150px] animate-pulse" style="animation-duration: 6s; animation-delay: 2s"></div>
      <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[400px] h-[400px] bg-forest/20 rounded-full blur-[100px] animate-pulse" style="animation-duration: 5s; animation-delay: 1s"></div>
    </div>

    <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-28 lg:py-40 w-full">
      <div class="max-w-4xl">
        <div class="inline-flex items-center gap-2 px-4 py-1.5 bg-white/[0.07] backdrop-blur-sm rounded-full text-sm text-gold mb-8 border border-white/[0.05]" data-reveal>
          <span class="w-2 h-2 bg-gold rounded-full animate-pulse"></span>
          AI Consulting for Canadian SMBs
        </div>

        <h1 class="font-heading text-5xl sm:text-6xl lg:text-7xl xl:text-8xl font-extrabold text-white mb-8 leading-[0.95] tracking-tight">
          <span data-split-reveal>Stop doing work</span>
          <br />
          <span data-split-reveal class="text-gold">AI should handle.</span>
        </h1>

        <p class="text-lg sm:text-xl text-gray-400 mb-12 max-w-2xl leading-relaxed" data-reveal>
          We help small-to-medium businesses automate workflows, build custom AI agents, and reclaim hours every week — so you can focus on growing your business.
        </p>

        <div class="flex flex-col sm:flex-row gap-4" data-reveal>
          <a
            href="/assessment"
            class="inline-flex items-center justify-center px-8 py-4 bg-gold hover:bg-gold-light text-deep-green font-bold rounded-xl text-base transition-all hover:shadow-[0_0_40px_rgba(255,179,0,0.3)]"
          >
            Take the Free AI Assessment
            <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
            </svg>
          </a>
          <a
            href="/contact"
            class="inline-flex items-center justify-center px-8 py-4 border border-white/20 hover:border-gold/40 text-white font-semibold rounded-xl text-base transition-all hover:bg-white/[0.03]"
          >
            Book a Free Consultation
          </a>
        </div>
      </div>
    </div>

    <!-- Bottom edge fade -->
    <div class="absolute bottom-0 left-0 right-0 h-24 bg-gradient-to-t from-off-white to-transparent"></div>
  </section>

  <!-- ============================================
       PROBLEM → SOLUTION
       ============================================ -->
  <section class="py-24 lg:py-32 bg-off-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center max-w-2xl mx-auto mb-16">
        <h2 class="font-heading text-3xl sm:text-4xl lg:text-5xl font-bold text-deep-green mb-5" data-split-reveal>
          Sound familiar?
        </h2>
        <p class="text-gray-600 text-lg" data-reveal>
          Most small businesses know AI could help — but they don't know where to start or who to trust.
        </p>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6" data-stagger>
        <div class="bg-white rounded-2xl p-8 border border-gray-200 shadow-card hover:shadow-elevated transition-shadow duration-500">
          <div class="w-12 h-12 rounded-xl bg-red-50 flex items-center justify-center mb-5">
            <svg class="w-6 h-6 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
          </div>
          <h3 class="font-heading text-lg font-bold text-deep-green mb-2">Buried in manual work</h3>
          <p class="text-gray-600 text-sm leading-relaxed">Your team spends hours on repetitive tasks — data entry, follow-ups, reporting — that should run on autopilot.</p>
        </div>
        <div class="bg-white rounded-2xl p-8 border border-gray-200 shadow-card hover:shadow-elevated transition-shadow duration-500">
          <div class="w-12 h-12 rounded-xl bg-amber-50 flex items-center justify-center mb-5">
            <svg class="w-6 h-6 text-amber-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
          </div>
          <h3 class="font-heading text-lg font-bold text-deep-green mb-2">Overwhelmed by AI options</h3>
          <p class="text-gray-600 text-sm leading-relaxed">There are hundreds of AI tools out there. You need someone to cut through the noise and find what actually works for your business.</p>
        </div>
        <div class="bg-white rounded-2xl p-8 border border-gray-200 shadow-card hover:shadow-elevated transition-shadow duration-500">
          <div class="w-12 h-12 rounded-xl bg-blue-50 flex items-center justify-center mb-5">
            <svg class="w-6 h-6 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
            </svg>
          </div>
          <h3 class="font-heading text-lg font-bold text-deep-green mb-2">Falling behind competitors</h3>
          <p class="text-gray-600 text-sm leading-relaxed">Businesses that adopt AI early are already pulling ahead. The longer you wait, the wider the gap gets.</p>
        </div>
      </div>
      <div class="text-center mt-14" data-reveal>
        <p class="text-xl font-heading font-bold text-forest">
          That's exactly why Mount Pixl exists.
        </p>
      </div>
    </div>
  </section>

  <!-- ============================================
       SERVICES — staggered grid reveal
       ============================================ -->
  <section class="py-24 lg:py-32">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center max-w-2xl mx-auto mb-16">
        <h2 class="font-heading text-3xl sm:text-4xl lg:text-5xl font-bold text-deep-green mb-5" data-split-reveal>
          What we do
        </h2>
        <p class="text-gray-600 text-lg" data-reveal>
          From strategy to implementation, we handle the full AI journey for your business.
        </p>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6" data-stagger>
        {services.map((service) => (
          <ServiceCard {...service} />
        ))}
      </div>
      <div class="text-center mt-12" data-reveal>
        <a href="/services" class="inline-flex items-center gap-2 px-6 py-3 border border-forest/20 rounded-xl text-forest font-semibold hover:bg-forest/5 transition-all">
          Explore all services
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
          </svg>
        </a>
      </div>
    </div>
  </section>

  <!-- ============================================
       HOW WE WORK — horizontal scroll pinned section
       ============================================ -->
  <section class="py-24 lg:py-32 bg-deep-green overflow-hidden">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mb-16">
      <h2 class="font-heading text-3xl sm:text-4xl lg:text-5xl font-bold text-white mb-5" data-split-reveal>
        How we work
      </h2>
      <p class="text-gray-400 text-lg max-w-xl" data-reveal>
        A proven four-step process that gets you from "where do we start?" to measurable results.
      </p>
    </div>

    <div class="horizontal-scroll-wrapper">
      <div class="horizontal-scroll-track px-4 sm:px-6 lg:px-8">
        {steps.map((step) => (
          <div class="horizontal-scroll-panel bg-white/[0.05] backdrop-blur-sm border border-white/10 rounded-2xl p-8 lg:p-10 flex flex-col">
            <div class="flex items-center gap-4 mb-6">
              <div class="w-14 h-14 rounded-full bg-gold/10 border-2 border-gold flex items-center justify-center">
                <span class="font-heading font-bold text-xl text-gold">{step.number}</span>
              </div>
              <div class="w-10 h-10 rounded-lg bg-white/5 flex items-center justify-center">
                <svg class="w-5 h-5 text-gold/70" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d={step.icon} />
                </svg>
              </div>
            </div>
            <h3 class="font-heading text-2xl font-bold text-white mb-3">{step.title}</h3>
            <p class="text-gray-400 leading-relaxed flex-1">{step.description}</p>
            <div class="mt-6 pt-6 border-t border-white/10">
              <span class="text-xs text-gold/60 uppercase tracking-widest font-medium">Step {step.number} of 4</span>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- ============================================
       MARQUEE — infinite scrolling partner logos
       ============================================ -->
  <section class="py-16 bg-off-white border-y border-gray-200/60 overflow-hidden">
    <p class="text-center text-xs font-semibold text-gray-400 uppercase tracking-[0.2em] mb-10">
      Built with industry-leading platforms
    </p>
    <div class="marquee" style="--duration: 25s; --gap: 3rem;">
      <div class="marquee-inner">
        {marqueeItems.map((name) => (
          <span class="text-2xl sm:text-3xl font-heading font-bold text-gray-300/60 whitespace-nowrap hover:text-forest transition-colors duration-300">
            {name}
          </span>
        ))}
      </div>
      <div class="marquee-inner" aria-hidden="true">
        {marqueeItems.map((name) => (
          <span class="text-2xl sm:text-3xl font-heading font-bold text-gray-300/60 whitespace-nowrap hover:text-forest transition-colors duration-300">
            {name}
          </span>
        ))}
      </div>
    </div>
    <!-- Reverse direction marquee -->
    <div class="marquee mt-6" style="--duration: 35s; --gap: 3rem;">
      <div class="marquee-inner" style="animation-direction: reverse">
        {[...marqueeItems].reverse().map((name) => (
          <span class="text-lg sm:text-xl font-heading font-semibold text-gray-300/40 whitespace-nowrap hover:text-gold transition-colors duration-300">
            {name}
          </span>
        ))}
      </div>
      <div class="marquee-inner" style="animation-direction: reverse" aria-hidden="true">
        {[...marqueeItems].reverse().map((name) => (
          <span class="text-lg sm:text-xl font-heading font-semibold text-gray-300/40 whitespace-nowrap hover:text-gold transition-colors duration-300">
            {name}
          </span>
        ))}
      </div>
    </div>
  </section>

  <!-- ============================================
       STATS — counter animation
       ============================================ -->
  <section class="py-24 lg:py-32 bg-deep-green">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid grid-cols-2 lg:grid-cols-4 gap-8 lg:gap-12" data-stagger>
        {stats.map((stat) => (
          <div class="text-center group">
            <div class="font-heading text-5xl sm:text-6xl lg:text-7xl font-extrabold text-gold mb-3 stat-number tracking-tight group-hover:scale-110 transition-transform duration-500 origin-center">{stat.value}</div>
            <div class="text-white font-medium text-sm mb-1">{stat.label}</div>
            <div class="text-gray-500 text-xs">{stat.suffix}</div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- ============================================
       CTA — Assessment
       ============================================ -->
  <section class="py-24 lg:py-32 relative overflow-hidden">
    <!-- Subtle background pattern -->
    <div class="absolute inset-0 opacity-[0.02]" style="background-image: radial-gradient(circle at 1px 1px, #0E2311 1px, transparent 0); background-size: 40px 40px;"></div>
    <div class="relative max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h2 class="font-heading text-3xl sm:text-4xl lg:text-5xl font-bold text-deep-green mb-5" data-split-reveal>
        Is your business ready for AI?
      </h2>
      <p class="text-gray-600 text-lg mb-10 max-w-2xl mx-auto" data-reveal>
        Take our free 3-minute assessment and get a personalized report on where AI can make the biggest impact in your business.
      </p>
      <div data-reveal>
        <a
          href="/assessment"
          class="inline-flex items-center justify-center px-10 py-5 bg-gold hover:bg-gold-light text-deep-green font-bold rounded-2xl text-lg transition-all hover:shadow-[0_0_60px_rgba(255,179,0,0.25)]"
        >
          Start Your Free AI Assessment
          <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
          </svg>
        </a>
      </div>
    </div>
  </section>

  <!-- ============================================
       BLOG PREVIEW — staggered cards
       ============================================ -->
  {posts.length > 0 && (
    <section class="py-24 lg:py-32 bg-off-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-end justify-between mb-14">
          <div>
            <h2 class="font-heading text-3xl sm:text-4xl lg:text-5xl font-bold text-deep-green mb-3" data-split-reveal>
              Latest insights
            </h2>
            <p class="text-gray-600 text-lg" data-reveal>Practical AI advice for business owners.</p>
          </div>
          <a href="/blog" class="hidden sm:inline-flex items-center gap-2 px-5 py-2.5 border border-forest/20 rounded-xl text-forest font-semibold hover:bg-forest/5 transition-all text-sm" data-reveal>
            View all posts
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
            </svg>
          </a>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6" data-stagger>
          {posts.map((post) => (
            <BlogCard
              title={post.data.title}
              description={post.data.description}
              date={post.data.date.toISOString()}
              category={post.data.category}
              slug={post.id}
            />
          ))}
        </div>
      </div>
    </section>
  )}

  <!-- ============================================
       FINAL CTA — gradient + magnetic
       ============================================ -->
  <section class="py-24 lg:py-32 bg-gradient-to-br from-forest via-deep-green to-[#0a1f0e] gradient-animate relative overflow-hidden">
    <div class="absolute inset-0 overflow-hidden">
      <div class="absolute -bottom-20 -right-20 w-[400px] h-[400px] bg-gold/10 rounded-full blur-[100px]"></div>
    </div>
    <div class="relative max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h2 class="font-heading text-3xl sm:text-4xl lg:text-5xl font-bold text-white mb-5" data-split-reveal>
        Ready to put AI to work?
      </h2>
      <p class="text-gray-400 text-lg mb-10 max-w-xl mx-auto" data-reveal>
        Book a free 30-minute consultation and we'll show you exactly where AI can save you time and money.
      </p>
      <div data-reveal>
        <a
          href="/contact"
          class="inline-flex items-center justify-center px-10 py-5 bg-gold hover:bg-gold-light text-deep-green font-bold rounded-2xl text-lg transition-all hover:shadow-[0_0_60px_rgba(255,179,0,0.3)]"
        >
          Book Your Free Consultation
        </a>
      </div>
      <p class="text-gray-500 text-sm mt-6" data-reveal>No commitment. No pressure. Just a conversation about your business.</p>
    </div>
  </section>
</BaseLayout>
